{"version":3,"sources":["app.js","home/home.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/IA","file":"app.src.js","sourcesContent":["(function(angular, io) {\n    'use strict';\n    angular.module('app', [])\n        .factory('socket', ['$rootScope', function($rootScope) {\n\n            var socket = io.connect();\n\n            return {\n                on: function(eventName, callback) {\n                    socket.on(eventName, function() {\n                        var args = arguments;\n                        $rootScope.$apply(function() {\n                            callback.apply(socket, args);\n                        });\n                    });\n                },\n                emit: function(eventName, data, callback) {\n                    socket.emit(eventName, data, function() {\n                        var args = arguments;\n                        $rootScope.$apply(function() {\n                            if (callback) {\n                                callback.apply(socket, args);\n                            }\n                        });\n                    })\n                }\n            };\n\n        }])\n        // .factory('socket', function(socketFactory) {\n        //     return socketFactory();\n        // })\n        .config(['$httpProvider', function($httpProvider) {\n            $httpProvider.defaults.useXDomain = true;\n            delete $httpProvider.defaults.headers.common['X-Requested-With'];\n        }])\n        .controller('MainController', function($scope, $http, socket, $location) {\n            var self = this;\n            self.baseUrl = $location.absUrl();\n            $scope.downloads = [];\n            $scope.infos = [];\n            $scope.taLinks = '';\n            $scope.dlInfo = '';\n            $scope.audios = [];\n\n            // socket.send({foo: 'ping'});\n\n\n\n            $scope.links;\n\n            $scope.sendLink = function() {\n                if (self.socket) {\n                    socket.send('links', $scope.links);\n                } else {\n                    $http.post(self.baseUrl + 'links', {\n                        'links': $scope.links\n                    });\n                }\n            }\n\n            socket.on('open', function() {\n                console.log('Oh my gosh, websocket is really open! Fukken awesome!');\n            });\n\n            socket.on('hello', function() {\n                $http.get('/audio').then(function(response) {\n                    var files = response.data;\n                    for (var i in files) {\n                        var filename = files[i];\n                        var path = self.baseUrl + 'audio/' + filename;\n                        $scope.audios.push({\n                            filename: filename,\n                            path: path\n                        });\n                    }\n                })\n            })\n\n            socket.on('dlAdded', function(data) {\n                // console.log('DL Added ! ');\n                // console.log(data);\n                $scope.infos.push(data);\n            });\n\n            socket.on('dlStarted', function(data) {\n                // console.log('DL Started ! ');\n                // console.log(data);\n                $scope.infos.push(data);\n                $scope.error = '';\n            });\n\n            socket.on('dlProgress', function(data) {\n                // console.log('DL Progress ! ');\n                // console.log(data);\n\n                $scope.dlInfo = data;\n                // $scope.percent = data.percent + '%';\n            });\n\n            socket.on('dlError', function(data) {\n                $scope.error = data;\n            });\n\n            socket.on('convertStarted', function(data) {\n                console.log(data);\n                $scope.convertInfo = data;\n                $scope.converting = data;\n            });\n\n            socket.on('convertSuccess', function(data) {\n                console.log(data);\n                var filename = data.filename;\n                var path = self.baseUrl + 'audio/' + filename;\n                $scope.audios.push({\n                    filename: filename,\n                    path: path\n                });\n                $scope.converting = '';\n            });\n\n            socket.on('convertError', function(data) {\n                console.log(data);\n                $scope.convertError = data;\n            });\n\n            socket.on('currentLinks', function(data) {\n\n                _.forEach(data, function(value) {\n                    console.log(value);\n                    var filename = value.filename;\n                    var path = self.baseUrl + 'audio/' + filename;\n\n                    $scope.audios.push({\n                        filename: filename,\n                        path: path\n                    });\n                });\n\n\n            });\n        });\n})(angular, io);\n",""],"sourceRoot":"/source/"}